<!DOCTYPE html>

<html lang="en">
    
<head>
    <title>Cookie Clicker!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <link rel="stylesheet" href="cookie_clicker.css">

</head>

<body>

    <!--Songs and SFX-->
    
    <audio id="gameMusic1" src="Cookie Clicker Song.mp3"></audio>
    <audio id="gameMusic2" src="Cookie Clicker Song 2.mp3"></audio>
    <audio id="menuMusic" src="Menu.mp3" loop></audio>
    <audio id="doubleTapSFX" src="doubletap.mp3"></audio>
    <audio id="upgradeBoughtSFX" src="chaching.mp3"></audio>
    <audio id="notificationSFX" src="notification.mp3"></audio>
    <audio id="errorSFX" src="error.mp3"></audio>
    <audio id="clickSFX" src="Click.mp3"></audio>
    <audio id="kingMidasSFX" src="Midas' Golden Touch.mp3"></audio>

    <!--Divs-->

    <div id="desktopCanvas">

<div id="menuScreen">
  <div id="loadingScreen">
    <div id="loadingContent">
      <div style="font-size: 350px; opacity: 0.25; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 0; pointer-events: none;">ğŸª</div>
      <h1>Cookie Clicker</h1>
      <p>by Preston C.</p>
      <ul>
        <li><button onclick="startGame()">Begin</button></li>
        <li><button onclick="openSettings()">Settings</button></li>
      </ul>
    </div>
  </div>
</div>
<div id="settingsScreen" class="popUpInCenter hidden">
 
    <button id="closeSettingsButton" onclick="closeSettings()">âŒ</button>
    <h2>Settingsâš™ï¸</h2>
<ul>
  <li>
    <label class="switch">
      <input type="checkbox" id="musicToggle" checked onchange="toggleMusic()">
      <span class="slider"></span>
    </label>
    <span class="switch-label">Music</span>
  </li>

  <li>
    <label class="switch">
      <input type="checkbox" id="sfxToggle" checked onchange="toggleSoundEffects()">
      <span class="slider"></span>
    </label>
    <span class="switch-label">SFX</span>
  </li>

  <li>
        <label class="switch">
            <input type="checkbox" id="devModeToggle">
            <span class="slider"></span>
        </label>
        <span class="switch-label">Developer Mode</span>
  </li>

  <div id="devModePopup" class="popUpInCenter hidden">
    <button id="closeDevModePopupButton" onclick="toggleDevModePopup('close')">âŒ</button>
    <h3 id="devText">Enter password to access Dev Mode.</h3>
    <input id="devPasswordBox">
    <button id="buttonSubmitPasswordDev" onclick="enterDevPassword()">Submit Password</button>
  </div>

</ul>

    </div>


<div id="game-layout" style="display: none;">
<div id="sideButtons">
    <button id="statsButton" onclick="toggleStats('open')">STATSğŸ“Š</button>
    <button id="achievementButton" onclick="toggleAchievements('open')">ACHIEVEMENTSğŸ†</button>
    <button id="returnToMenuButton" onclick="returnToMainMenu()">RETURN TO MAIN MENU</button>
    <button id="devModeIndicator" style="display: none; background-color: orange; color: black; font-weight: bold; border: 2px solid black; pointer-events: none;">DEV MODE ENABLED</button>
</div>

        <div id="statsArea" class="popUpInCenter hidden">
            <button id="closeStatsButton" onclick="toggleStats('close')">âŒ</button>
            <h2>STATSğŸ“Š</h2>
            <ul> <!--General Stats-->
                <li>Clicks: <span id="cookiesClickedStat">0</span></li>
                <li>Cookies Gained (All Time): <span id="cookiesGainedStat">0</span></li>
                <li>Time Played: <span id="timePlayedStat">00:00:00</span></li>
            </ul>
            <hr>
            <ul> <!--Cookies Being Gained Stats-->
                <li>Cookies Per Click: <span id="cookiesGainedOnClickStat">1</span></li>
                <li>Cookies Per Second (Passively): <span id="cookiesPassivelyGainedPSStat">0</span></li>
            </ul>
            <hr>
            <ul> <!--Upgrade Stats-->
                <li>Cookies Spent: <span id="cookiesSpentStat">0</span></li>
                <li>Upgrades Purchased (Total): <span id="upgradesPurchasedStat">0</span></li>
                <li>Upgrades Unlocked: <span id="upgradesUnlockedStat">2</span></li>
            </ul>
            <hr>
            <ul> <!--Autoclicker Stats-->
                <li>Cookies Gained from Clicking: <span id="cookiesGainedClickingStat">0</span></li>
                <li>Cookies Gained Passively: <span id="cookiesGainedPassivelyStat">0</span></li>
            </ul>
            <hr>
            <ul> <!--More Soon-->
                <li>Cookies gained from Double Taps: <span id="cookiesGainedFromDoubleTapsStat">0</span></li>
                <li>Double Taps landed: <span id="doubleTapsLandedStat">0</span></li>
                <li>Cookies gained from King Midas' Golden Touch: <span id="cookiesGainedFromKingMidasStat"></span></li>
                <li>King Midas' Golden Touch Landed: <span id="kingMidasLandedStat"></span></li>
            </ul>
        </div>

        <div id="achievementArea" class="popUpInCenter hidden">
            <button id="closeAchievementButton" onclick="toggleAchievements('close')">âŒ</button>
            <h2>ACHIEVEMENTSğŸ†</h2>
            <p>COMING SOON!</p>
            </div>

<div id="cookieArea">
  <div class="cookie-wrapper">
    <button id="cookie" onclick="cookieClicked()">ğŸª</button>
    <div id="notificationArea"></div>
  </div>
</div>


    <div class="scoreWrapper">
        <h2 id="scoreNumber">0</h2>
    </div>

    <div id="shopArea">
        <h2>Upgrade Shop</h2>
        <ul>
            <li> <!--+1 Click-->
                <h3>+1 ClickğŸ‘‰ğŸª</h3>
                <p class="descriptionUpgrade" style="font-size: medium;">Gain 1 more cookie per click! Stacks!</p>

                <div class="priceRow">
                    <p style="color: red;" id="UpgradeOnePrice">Price: 10 Cookies</p>
                    <p id="upgradeOnePurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeOne" onclick="upgradeBought('one')">BUY</button>
            </li>
            <li> <!--Double Tap-->
                <h3>Double Tap âœŒï¸</h3>
                <p class="descriptionUpgrade" style="font-size: medium;">Grants a 5% chance to get a click worth double the cookies. It also plays a nice sound when you get it! It can only be purchased once.</p>

                <div class="priceRow">
                    <p style="color: red;" id="UpgradeTwoPrice">Price: 50 Cookies</p>
                    <p id="upgradeTwoPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeTwo" onclick="upgradeBought('two')">BUY</button>
            </li>
            <li> <!--Grandma's Help-Listed as Upgrade Four-->
                <h3 id="upgradeFourTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionFour">â”â”â”â”â”</p>
                
                <div class="priceRow">
                    <p style="color: red" id="upgradeFourPrice">Price: â“â“â“ Cookies</p>
                    <p id="upgradeFourPurchasedP">Purchased: 0</p>
                </div>
                <button style="color: lightgray;" id="buyButtonUpgradeFour" onclick="upgradeBought('four')">ğŸš«</button>
            </li>
            <li> <!--Autoclick-Listed as Upgrade Three-->
                <h3 id="upgradeThreeTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" id= "descriptionThree" style="font-size: medium;">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeThreePrice">Price: â“â“â“ Cookies</p>
                    <p id="upgradeThreePurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeThree" style="color: lightgrey" onclick="upgradeBought('three')">ğŸš«</button>
            </li>
            <li id="upgradeSixContainer" style="display: none;"> <!--Oven Boost-Listed as Upgrade Six-->
                <h3 id="upgradeSixTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionSix">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeSixPrice">Price: â“â“â“ Cookies</p>
                    <p id="upgradeSixPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeSix" onclick="upgradeBought('six')">ğŸš«</button>
            </li>
            <li id="upgradeFiveContainer" style="display: none;"> <!--Another One!-Listed as Upgrade Five-->
                <h3 id="upgradeFiveTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionFive">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeFivePrice">Price: â“â“â“ Cookies</p>
                    <p id="upgradeFivePurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeFive" onclick="upgradeBought('five')">ğŸš«</button>
            </li>
            <li id="upgradeSevenContainer" style="display: none;"> <!--Legal Gambling-->
                <h3 id="upgradeSevenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionSeven">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeSevenPrice">Price: â“â“â“â“ Cookies</p>
                    <p id="upgradeSevenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeSeven" onclick="upgradeBought('seven')">ğŸš«</button>
            </li> 
            <li id="upgradeEightContainer" style="display: none;"> <!--Super Crunch ğŸ’ªğŸª-->
                <h3 id="upgradeEightTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionEight">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeEightPrice">Price: â“â“â“â“ Cookies</p>
                    <p id="upgradeEightPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeEight" onclick="upgradeBought('eight')">ğŸš«</button>
            </li>
            <li id="upgradeNineContainer" style="display: none;"> <!--Mega Oven ğŸ”¥ğŸª-->
                <h3 id="upgradeNineTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionNine">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeNinePrice">Price: â“â“â“â“ Cookies</p>
                    <p id="upgradeNinePurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeNine" onclick="upgradeBought('nine')">ğŸš«</button>
            </li>
            <li id="upgradeTenContainer" style="display: none;"> <!--Cookie Punch-->
                <h3 id="upgradeTenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionTen">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeTenPrice">Price: â“â“â“â“â“ Cookies</p>
                    <p id="upgradeTenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeTen" onclick="upgradeBought('ten')">ğŸš«</button>
            </li>
            <li id="upgradeElevenContainer" style="display: none;"> <!--Cookie Farm-->
                <h3 id="upgradeElevenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionEleven">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeElevenPrice">Price: â“â“â“â“â“ Cookies</p>
                    <p id="upgradeElevenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeEleven" onclick="upgradeBought('eleven')">ğŸš«</button>
            </li>
            <li id="upgradeTwelveContainer" style="display: none;"> <!--Assembly Line-->
                <h3 id="upgradeTwelveTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionTwelve">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeTwelvePrice">Price: â“â“â“â“â“â“ Cookies</p>
                    <p id="upgradeTwelvePurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeTwelve" onclick="upgradeBought('twelve')">ğŸš«</button>
            </li>
            <li id="upgradeThirteenContainer" style="display: none;"> <!--King Midas' Touch-->
                <h3 id="upgradeThirteenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionThirteen">â”â”â”â”â”</p>

                <div class="priceRow">
                    <p style="color: red;" id="upgradeThirteenPrice">â“â“â“â“â“â“</p>
                    <p id="upgradeThirteenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeThirteen" onclick="upgradeBought('thirteen')">ğŸš«</button>
                </li>
                <li id="upgradeFourteenContainer" style="display: none;"> <!--Cookie Crusher-->
                <h3 id="upgradeFourteenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionFourteen">â”â”â”â”â”</p>
                <div class="priceRow">
                    <p style="color: red;" id="upgradeFourteenPrice">Price: â“â“â“â“â“â“ Cookies</p>
                    <p id="upgradeFourteenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeFourteen" onclick="upgradeBought('fourteen')">ğŸš«</button>
            </li>
            <li id="upgradeFifteenContainer" style="display: none;"> <!--Three-Peat-->
                <h3 id="upgradeFifteenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionFifteen">â”â”â”â”â”</p>
                <div class="priceRow">
                    <p style="color: red;" id="upgradeFifteenPrice">Price: â“â“â“â“â“â“ Cookies</p>
                    <p id="upgradeFifteenPurchasedP">Purchased: 0</p>
                </div>
                <button id="buyButtonUpgradeFifteen" onclick="upgradeBought('fifteen')">ğŸš«</button>
                </li>
                <li id="upgradeSixteenContainer" style="display: none;"> <!--King Midas Bonus-->
                    <h3 id="upgradeSixteenTitle">ğŸ”’ğŸ”’ğŸ”’</h3>
                    <p class="descriptionUpgrade" style="font-size: medium;" id="descriptionSixteen">â”â”â”â”â”</p>
                    <div class="priceRow">
                        <p style="color: red;" id="upgradeSixteenPrice">Price: â“â“â“â“â“â“ Cookies</p>
                        <p id="upgradeSixteenPurchasedP">Purchased: 0</p>
                        </div>
                    <button id="buyButtonUpgradeSixteen" onclick="upgradeBought('sixteen')">ğŸš«</button>
                </li>
        </ul>
    </div>
</div>

</div>


<script>
// Ensure Dev Mode toggle stays visually on while popup is open
document.addEventListener('DOMContentLoaded', function() {
    var devToggle = document.getElementById('devModeToggle');
    if (devToggle) {
        devToggle.addEventListener('change', function(e) {
            if (devToggle.checked) {
                // Open popup and keep toggle checked
                toggleDevModePopup('open');
                devToggle.checked = true;
            } else {
                // Only close popup if user unchecks
                toggleDevModePopup('close');
            }
        });
    }
});

let cookies=0;
let cookieMultiplier=1;
let upgradesUnlocked=2;
let cookiesOnClick;
let musicStarted = false;

// Time Played Stat
let playSeconds = 0;
let playTimer = null;

//Math Variables
let tempNumberOne;
let tempNumberTwo;

//Stats
let clicksAllTime = 0;
let cookiesGainedAllTime = 0;
let upgradesPurchased = 0;
let cookiesSpent = 0;
let cookiesGainedClicking = 0;
let cookiesGainedPassively = 0;
let cookiesGainedFromDoubleTaps = 0;
let doubleTapsLanded = 0;
let cookiesGainedFromKingMidas = 0;
let kingMidasLanded = 0;

//Music and Sound Effects
let musicEnabled = true;
let soundEffectsEnabled = true;
let currentTrack = 1;
const music1 = document.getElementById('gameMusic1');
const music2 = document.getElementById('gameMusic2');
const menuMusic = document.getElementById('menuMusic');

//Upgrade One Variables
let UpgradeOnePriceNumber=10;
let upgradeOnePurchased=0;

//Upgrade Two Upgrade Activator
let DoubleTap=false;

//Notification Management
let hasSeenUpgradeOneNotice = false;
let hasSeenUpgradeTwoNotice = false;
let hasSeenUpgradeThreeNotice = false;
let hasSeenUpgradeFourNotice = false;
let hasSeenUpgradeFiveNotice = false;
let hasSeenUpgradeSixNotice = false;
let hasSeenUpgradeSevenNotice = false;
let hasSeenUpgradeEightNotice = false;
let hasSeenUpgradeNineNotice = false;
let hasSeenUpgradeTenNotice = false;
let hasSeenUpgradeElevenNotice = false;
let hasSeenUpgradeTwelveNotice = false;
let hasSeenupgradeThirteenNotice = false;
let hasSeenUpgradeFourteenNotice = false;
let hasSeenUpgradeFifteenNotice = false;
let hasSeenUpgradeSixteenNotice = false;

//Upgrade Three Variables-Autoclick
let upgradeThreePriceNumber=200;
let upgradeThreePurchased=0;

//Upgrade Four Variables-Grandma's Help
let upgradeFourPriceNumber=100;
let upgradeFourPurchased=0;

//Upgrade Five Variables-Another One
let upgradeFivePriceNumber=500;
let upgradeFivePurchased=0;

//Upgrade Six Variables-Oven Boost
let upgradeSixPriceNumber=500;
let upgradeSixPurchased=0;

//Upgrade Seven Variables-Legal Gambling
let upgradeSevenPriceNumber = 1000;
let upgradeSevenPurchased=0;

//Upgrade Eight Variables-Super Crunch
let upgradeEightPriceNumber = 1000;
let upgradeEightPurchased=0;

//Upgrade Nine Variables-Mega Oven
let upgradeNinePriceNumber = 2000;
let upgradeNinePurchased=0;

//Upgrade Ten Variables-Cookie Punch
let upgradeTenPriceNumber = 10000;
let upgradeTenPurchased=0;

//Upgrade Eleven Variables-Cookie Farm
let upgradeElevenPriceNumber = 25000;
let upgradeElevenPurchased=0;

//Upgrade Twelve Variables-Assembly Line
let upgradeTwelvePriceNumber = 50000;
let upgradeTwelvePurchased=0;

//Upgrade Thirteen Variables-King Midas' Touch
let upgradeThirteenPriceNumber = 50000;
let upgradeThirteenPurchased=0;

//Upgrade Thirteen Upgrade Activator Variables
let KingMidasTouch = false;
let kingMidasBonus = 50000;
let kingMidasChance = 0.0011;

//Upgrade Fourteen Variables-Cookie Crusher
let upgradeFourteenPriceNumber = 100000;
let upgradeFourteenPurchased=0;

//Upgrade Fifteen Variables-Three-Peat
let upgradeFifteenPriceNumber = 100000;
let upgradeFifteenPurchased=0;

//Upgrade Sixteen Variables-King Midas Bonus
let upgradeSixteenPriceNumber = 200000;
let upgradeSixteenPurchased=0;


let autoCPS=0;
let autoclickTimer = null;
let autoclickInterval = 1000;
let autoclickStarted = false;

//Developer Mode
let isInDevMode = false;
let devPassword = "cc123";
let devModeStep = 0; // 0 = ask password, 1 = ask cookie count

function startGame(){
    hideAllScreens();
    document.getElementById('game-layout').style.display = 'block';
    stopAllSounds();
    // Always try to play music when starting the game
    musicStarted = false;
    if (musicEnabled) {
        try {
            playMusicLooping();
            musicStarted = true;
        } catch (e) {
            console.warn("Music blocked on mobile:", e);
            musicStarted = true; // prevent retry loop
        }
    }
    changeCookieCount();
    statsTextChanger();
    priceTextColorChangers();

    // Start play timer if not already started
    if (!playTimer) {
        playTimer = setInterval(function() {
            playSeconds++;
            updateTimePlayedStat();
        }, 1000);
    }
}

function hideAllScreens() {
  document.getElementById('menuScreen').style.display = 'none';
  document.getElementById('settingsScreen').style.display = 'none';
  document.getElementById('game-layout').style.display = 'none';
    // Optionally pause timer when not in game (comment out if you want total app time)
    // if (playTimer) { clearInterval(playTimer); playTimer = null; }
}

function openSettings() {
    hideAllScreens();
    document.getElementById('settingsScreen').style.display = 'block';
    // Sync Dev Mode toggle with actual Dev Mode state
    var devToggle = document.getElementById('devModeToggle');
    if (devToggle) {
        devToggle.checked = isInDevMode;
    }
    // Always reset musicStarted so music can play again on Begin
    musicStarted = false;
    if (musicEnabled) {
        try {
            stopAllSounds();
            playMenuMusic();
            musicStarted = true;
        } catch (e) {
            console.warn("Music blocked on mobile:", e);
            musicStarted = true; // prevent retry loop
        }
    }
}



function changeCookieCount(){
document.getElementById('scoreNumber').textContent = cookies.toLocaleString();
    statsTextChanger();
    priceTextColorChangers()
}

function returnToMainMenu() {
  hideAllScreens();
  document.getElementById('menuScreen').style.display = 'block';
}

function upgradeBoughtSFXPlay(){
    if (soundEffectsEnabled){
    const upgradeSFX = document.getElementById("upgradeBoughtSFX")
    upgradeSFX.pause();
    upgradeSFX.currentTime = 0;
    upgradeSFX.volume = 1;
    upgradeSFX.play();
    }
}

function alerts(textToSay){
    if (textToSay == "notEnough"){
        alert('Not enough cookies to get this upgrade!');
    }else if (textToSay == "notUnlocked"){
        alert('Buy previous upgrade to unlock this upgrade!');
    }else if (textToSay == "buyOne"){
        alert('You have bought the max amount of this upgrade!')
    }
}

function clickSFX(){
    if (soundEffectsEnabled){
        const clickSound = document.getElementById("clickSFX");
        clickSound.pause();           // stop if it's playing
        clickSound.currentTime = 0;  // rewind to start
        clickSound.volume = 1;    // sets volume to max
        clickSound.play();            // play from beginning
    }
}

function doubleTapNoti(){
    if (soundEffectsEnabled){
        const dtSound = document.getElementById("doubleTapSFX");
        dtSound.pause();
        dtSound.currentTime = 0;
        dtSound.volume = 1;
        dtSound.play();
    }
        showNotification('Lucky click! Double tap was activated!')
}

function kingMidasNoti(){
    if (soundEffectsEnabled){
        const kmSound = document.getElementById("kingMidasSFX");
        kmSound.pause();
        kmSound.currentTime = 0;
        kmSound.volume = 1;
        kmSound.play();
    }
        showNotification("King Midas' Touch activated! Your click turned to gold!")
}

function doubleTap() {
    // Always start with base value
    cookiesOnClick = cookieMultiplier;
    if (DoubleTap === true && Math.random() < 0.01) {
        cookiesOnClick = cookieMultiplier * 2;
        cookiesGainedFromDoubleTaps += cookiesOnClick / 2;
        doubleTapsLanded += 1;
        doubleTapNoti();
    } else if (KingMidasTouch === true && Math.random() < kingMidasChance) {
        kingMidasNoti();
        cookiesOnClick = cookieMultiplier + kingMidasBonus;
        cookiesGainedFromKingMidas += kingMidasBonus;
        kingMidasLanded += 1;
    }
}

function cookieClicked(){
    doubleTap()
    clickSFX();
    cookies += cookiesOnClick;
    clicksAllTime += 1;
    cookiesGainedAllTime += cookiesOnClick;
    cookiesGainedClicking += cookiesOnClick;
    statsTextChanger();
    changeCookieCount();
}


function priceTextColorChangers(){ //Called from the "Change Cookie Count" function
    //+1 Click
    if (cookies>=UpgradeOnePriceNumber){
        document.getElementById('UpgradeOnePrice').style.color = "green";
        if (hasSeenUpgradeOneNotice == false){
        notification("You can now afford +1 Click!") 
        hasSeenUpgradeOneNotice=true; 
        }
    }else{
        document.getElementById('UpgradeOnePrice').style.color = "red";
        hasSeenUpgradeOneNotice = false;
    }

    //Double Tap
    if (DoubleTap == false){
          if (cookies>=50){
        document.getElementById('UpgradeTwoPrice').style.color = "green";
        if (hasSeenUpgradeTwoNotice == false){
        notification("You can now afford Double Tap!")
        hasSeenUpgradeTwoNotice=true;
        }
    }else if (DoubleTap == false){
        document.getElementById('UpgradeTwoPrice').style.color = "red";
        hasSeenUpgradeTwoNotice=false;
    }  
    }else{
        document.getElementById('UpgradeTwoPrice').style.color = "red";
    }

    //Autoclick
    if (cookies>=upgradeThreePriceNumber && upgradesUnlocked>=3){
        document.getElementById('upgradeThreePrice').style.color = "green";
        if (hasSeenUpgradeThreeNotice == false){
            notification('You can now afford Autoclick!')
            hasSeenUpgradeThreeNotice=true;
        }
    }else{
        document.getElementById('upgradeThreePrice').style.color = "red";
        hasSeenUpgradeThreeNotice=false;
    }

    //Grandma's Help
    if (cookies>=upgradeFourPriceNumber && upgradesUnlocked>=3){
        document.getElementById('upgradeFourPrice').style.color= "green";
        if (hasSeenUpgradeFourNotice == false){
            notification('You can now afford Grandmas Help!')
            hasSeenUpgradeFourNotice = true;
        }
    }else{
        document.getElementById('upgradeFourPrice').style.color= "red";
        hasSeenUpgradeFourNotice=false;
    }

    //Another One
    if (cookies>=upgradeFivePriceNumber && upgradesUnlocked>=5 && upgradeFivePurchased == 0){
        document.getElementById('upgradeFivePrice').style.color = "green";
        if (hasSeenUpgradeFiveNotice == false){
            notification('You can now afford Another One!')
            hasSeenUpgradeFiveNotice = true;
        }
    }else{
        document.getElementById('upgradeFivePrice').style.color="red";
        hasSeenUpgradeFiveNotice=false;
    }

    //Oven Boost
    if (cookies>=upgradeSixPriceNumber && upgradesUnlocked>=6){
        document.getElementById('upgradeSixPrice').style.color = "green";
        if (hasSeenUpgradeSixNotice == false){
            notification('You can now afford Oven Boost!')
            hasSeenUpgradeSixNotice = true;
        }
    }else{
        document.getElementById('upgradeSixPrice').style.color = "red";
        hasSeenUpgradeSixNotice = false;
    }

    //Legal Gambling
    if (cookies>=upgradeSevenPriceNumber && upgradesUnlocked>=7){
        document.getElementById('upgradeSevenPrice').style.color = "green";
        if (hasSeenUpgradeSevenNotice == false){
            /*notification('You can now afford Legal Gambling!') Hidden for now*/
            hasSeenUpgradeSevenNotice = true;
        }
    }else{
        document.getElementById('upgradeSevenPrice').style.color = "red";
        hasSeenUpgradeSevenNotice = false;
    }

    //Super Crunch
    if (cookies>=upgradeEightPriceNumber && upgradesUnlocked>=7){
        document.getElementById('upgradeEightPrice').style.color = "green";
        if (hasSeenUpgradeEightNotice == false){
            notification('You can now afford Super Crunch!')
            hasSeenUpgradeEightNotice = true;
        }
    }else{
        document.getElementById('upgradeEightPrice').style.color = "red";
        hasSeenUpgradeEightNotice = false;
    }

    //Mega Oven
    if (cookies>=upgradeNinePriceNumber && upgradesUnlocked>=7){
        document.getElementById('upgradeNinePrice').style.color = "green"
        if (hasSeenUpgradeNineNotice == false){
            notification('You can now afford Mega Oven!')
            hasSeenUpgradeNineNotice = true;
        }
    }else{
        document.getElementById('upgradeNinePrice').style.color = "red";
        hasSeenUpgradeNineNotice = false;
    }

    //Cookie Punch
    if (cookies>=upgradeTenPriceNumber && upgradesUnlocked>=9){
        document.getElementById('upgradeTenPrice').style.color = "green"
        if (hasSeenUpgradeTenNotice == false){
            notification('You can now afford Cookie Punch!')
            hasSeenUpgradeTenNotice = true;
        }
}else{
        document.getElementById('upgradeTenPrice').style.color = "red";
        hasSeenUpgradeTenNotice = false;
    }

    //Cookie Farm
    if (cookies>=upgradeElevenPriceNumber && upgradesUnlocked>=9){
        document.getElementById('upgradeElevenPrice').style.color = "green"
        if (hasSeenUpgradeElevenNotice == false){
            notification('You can now afford Cookie Farm!')
            hasSeenUpgradeElevenNotice = true;
        }
}else{
        document.getElementById('upgradeElevenPrice').style.color = "red";
        hasSeenUpgradeElevenNotice = false;
    }

    //Assembly Line
    if (cookies>=upgradeTwelvePriceNumber && upgradesUnlocked>=11 && upgradeTwelvePurchased==0){
        document.getElementById('upgradeTwelvePrice').style.color = "green"
        if (hasSeenUpgradeTwelveNotice == false){
            notification('You can now afford Assembly Line!')
            hasSeenUpgradeTwelveNotice = true;
        }
}else{
        document.getElementById('upgradeTwelvePrice').style.color = "red";
        hasSeenUpgradeTwelveNotice = false;
    }

    //King Midas' Touch
    if (cookies>=upgradeThirteenPriceNumber && upgradesUnlocked>=12 && upgradeThirteenPurchased==0){
        document.getElementById('upgradeThirteenPrice').style.color = "green"
        if (hasSeenupgradeThirteenNotice == false){
            notification("You can now afford King Midas' Touch!")
            hasSeenupgradeThirteenNotice = true;
        }
}else{
        document.getElementById('upgradeThirteenPrice').style.color = "red";
        hasSeenupgradeThirteenNotice = false;
}

    //Cookie Crusher
    if (cookies>=upgradeFourteenPriceNumber && upgradesUnlocked>=13){
        document.getElementById('upgradeFourteenPrice').style.color = "green"
        if (hasSeenUpgradeFourteenNotice == false){
            notification('You can now afford Cookie Crusher!')
            hasSeenUpgradeFourteenNotice = true;
        }
}else{
        document.getElementById('upgradeFourteenPrice').style.color = "red";
        hasSeenUpgradeFourteenNotice = false;
    }

    //Three-Peat
    if (cookies>=upgradeFifteenPriceNumber && upgradesUnlocked>=14 && upgradeFifteenPurchased==0){
        document.getElementById('upgradeFifteenPrice').style.color = "green"
        if (hasSeenUpgradeFifteenNotice == false){
            notification('You can now afford Three-Peat!')
            hasSeenUpgradeFifteenNotice = true;
        }
}else{
        document.getElementById('upgradeFifteenPrice').style.color = "red";
        hasSeenUpgradeFifteenNotice = false;
    }

    //King Midas' Touch Boost
    if (cookies>=upgradeSixteenPriceNumber && upgradesUnlocked>=14 && upgradeSixteenPurchased == 0 && KingMidasTouch == true){
        document.getElementById('upgradeFifteenPrice').style.color = "green"
        if (hasSeenUpgradeSixteenNotice == false){
            notification("You can now afford King Midas' Touch Boost!")
            hasSeenUpgradeSixteenNotice = true;
        }
    }else{
        document.getElementById('upgradeSixteenPrice').style.color = "red";
        hasSeenUpgradeSixteenNotice = false;
    }
}

function showNotification(message) {
    const note = document.createElement("div");
    note.className = "notification";
    note.textContent = message;
    document.getElementById("notificationArea").appendChild(note);

    // Remove after 3 seconds
    setTimeout(() => {
        note.remove();
    }, 5000);
}
function notification(message){

    if (soundEffectsEnabled){
        const notifSound = document.getElementById("notificationSFX");
        notifSound.currentTime = 0;
        notifSound.play();
    }
    showNotification(message)
}

function error(message){
    if (soundEffectsEnabled){
    const errorSound = document.getElementById("errorSFX");
    errorSound.pause();           // stop if it's playing
    errorSound.currentTime = 0;  // rewind to start
    errorSound.volume = 1;    // sets volume to max
    errorSound.play();            // play from beginning
    showNotification(message);    // show the visual message
    }

}


function upgradeBought(upgrade){

    if (upgrade == "one"){
        if (cookies >=UpgradeOnePriceNumber){
            cookies-=UpgradeOnePriceNumber;
            cookiesSpent += UpgradeOnePriceNumber;
            let tempNumberOne = UpgradeOnePriceNumber*.5;
            UpgradeOnePriceNumber+=tempNumberOne
            UpgradeOnePriceNumber = Math.ceil(UpgradeOnePriceNumber);
            cookieMultiplier+=1;
            upgradeOnePurchased+=1;
            upgradesPurchased += 1;
            if (upgradeOnePurchased >=3){
                unlockGrandmaAuto()
            }
            document.getElementById('UpgradeOnePrice').textContent = `Price: ${UpgradeOnePriceNumber.toLocaleString()} Cookies`;     
            document.getElementById('upgradeOnePurchasedP').textContent = `Purchased: ${upgradeOnePurchased}`
            showNotification('You have successfully purchased +1 Click!')
            upgradeBoughtSFXPlay()
            changeCookieCount()
        }else{
            error('You do not have enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "two"){
    if (cookies >=50 && DoubleTap == false){
        cookies-=50
         cookiesSpent += 50;
        DoubleTap = true;
        document.getElementById('upgradeTwoPurchasedP').textContent = `Purchased: 1`
        document.getElementById('buyButtonUpgradeTwo').style.color = "darkgrey"
        showNotification('You have succesfully purchased Double Tap!')
        upgradesPurchased += 1;
        unlockGrandmaAuto()
        upgradeBoughtSFXPlay()
        changeCookieCount()
    }else if (DoubleTap == true){
        error('You can only buy this upgrade once!')
    }else{
        error('You do not have enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "three"){
    if (cookies>=upgradeThreePriceNumber && upgradesUnlocked >=3){
    cookies-=upgradeThreePriceNumber;
     cookiesSpent += upgradeThreePriceNumber;
    let tempNumberOne=upgradeThreePriceNumber*.3;
    upgradeThreePriceNumber+=tempNumberOne
    upgradeThreePriceNumber=Math.ceil(upgradeThreePriceNumber);
    upgradeThreePurchased+=1;
    upgradesPurchased += 1;
    autoCPS+=1;
    unlockAnotherOne()
    document.getElementById('upgradeThreePrice').textContent = `Price: ${upgradeThreePriceNumber.toLocaleString()} Cookies`;
    document.getElementById('upgradeThreePurchasedP').textContent = `Purchased: ${upgradeThreePurchased}`
    showNotification('You have successfully purchased Autoclick!')
    upgradeBoughtSFXPlay()
    changeCookieCount()
    autoclick()
}else if (upgradesUnlocked < 3){
    error('Purchase the upgrade Double Tap or buy 3 +1 Clicks to unlock this Upgrade!')
}else{
    error('You do not have enough cookies to purchase this upgrade!')
}
}else if (upgrade == "four"){
    if (cookies>=upgradeFourPriceNumber && upgradesUnlocked >= 3){
        cookies-=upgradeFourPriceNumber;
         cookiesSpent += upgradeFourPriceNumber;
        upgradeFourPurchased+=1;
        let tempNumberOne=upgradeFourPriceNumber*.26;
        upgradeFourPriceNumber+=tempNumberOne;
        upgradeFourPriceNumber=Math.ceil(upgradeFourPriceNumber);
        cookieMultiplier+=2;
        unlockAnotherOne()
        upgradesPurchased += 1;
        document.getElementById('upgradeFourPrice').textContent = `Price: ${upgradeFourPriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeFourPurchasedP').textContent = `Purchased: ${upgradeFourPurchased}`
        showNotification('You have successfully purchased Grandmas help!')
        upgradeBoughtSFXPlay()
        changeCookieCount()
    }else if (upgradesUnlocked < 3){
        error('Purchase the upgrade Double Tap or buy 3 +1 Clicks to unlock this upgrade!')
    }else{
        error('You do not have enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "five"){
    if (cookies >= upgradeFivePriceNumber && upgradesUnlocked >= 5 && upgradeFivePurchased === 0) {
        cookies -= upgradeFivePriceNumber;
        cookiesSpent += upgradeFivePriceNumber;
        upgradeFivePurchased += 1;
        upgradesPurchased += 1;
        document.getElementById('upgradeFivePurchasedP').textContent = `Purchased: 1`;

        // +1 to each upgrade
        cookieMultiplier += 3;

        autoCPS += 1;
        autoclick();

        autoCPS += 5;
        autoclick();

        cookieMultiplier += 2;
        document.getElementById('upgradeFourPurchasedP').textContent = `Purchased: ${upgradeFourPurchased}`
        unlockGambling()
        document.getElementById('buyButtonUpgradeFive').style.color = "lightgrey";
        showNotification('You have successfully purchased Another One!');
        upgradeBoughtSFXPlay();
        changeCookieCount();
    } else if (upgradeFivePurchased !== 0) {
        error('You can only buy this upgrade once!');
    } else if (upgradesUnlocked < 5) {
        error('Purchase either Autoclicker or Grandmas Help to unlock this upgrade!');
    } else {
        error('Not enough cookies to purchase this upgrade!');
    }
}else if (upgrade == "six"){
    if (cookies>=upgradeSixPriceNumber && upgradesUnlocked>=6){
        cookies-=upgradeSixPriceNumber;
         cookiesSpent += upgradeSixPriceNumber;
        upgradeSixPurchased+=1;
        let tempNumberOne = upgradeSixPriceNumber*.25;
        upgradeSixPriceNumber+=tempNumberOne;
        upgradeSixPriceNumber = Math.ceil(upgradeSixPriceNumber);
        autoCPS+=5;
        unlockGambling()
        upgradesPurchased += 1;
        document.getElementById('upgradeSixPrice').textContent = `Price: ${upgradeSixPriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeSixPurchasedP').textContent = `Purchased: ${upgradeSixPurchased}`
        showNotification('You have successfully purchased Oven Boost!')
        upgradeBoughtSFXPlay()
        changeCookieCount()
        autoclick()
    }else if (upgradesUnlocked<6){
        error('Purchase either Autoclicker or Grandmas Help to unlock this upgrade!');
    }else{
        error('Not enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "seven"){
    if (cookies>=upgradeSevenPriceNumber && upgradesUnlocked>=7){
        //Insert Legal Gambling Here
    }else if (upgradesUnlocked<7){
        error('Purchase either Another One or Oven Boost to unlock this upgrade!')
    }else{
        error('Not enough cookies to puchase this upgrade!')
    }
}else if (upgrade == "eight"){
            if (cookies >=upgradeEightPriceNumber && upgradesUnlocked>=7){
            cookies-=upgradeEightPriceNumber;
             cookiesSpent += upgradeEightPriceNumber;
             unlockPunch()
            let tempNumberOne = upgradeEightPriceNumber*.175;
            upgradeEightPriceNumber+=tempNumberOne
            upgradeEightPriceNumber = Math.ceil(upgradeEightPriceNumber);
            cookieMultiplier+=10;
            upgradeEightPurchased+=1;
            upgradesPurchased += 1;
            document.getElementById('upgradeEightPrice').textContent = `Price: ${upgradeEightPriceNumber.toLocaleString()} Cookies`;   
            document.getElementById('upgradeEightPurchasedP').textContent = `Purchased: ${upgradeEightPurchased}`
            showNotification('You have successfully purchased Super Crunch!')
            upgradeBoughtSFXPlay()
            changeCookieCount()
        }else if (upgradesUnlocked<7){
            error('Purchase either Another One or Oven Boost to unlock this upgrade!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
    }

}else if (upgrade == "nine"){
    if (cookies >= upgradeNinePriceNumber && upgradesUnlocked>=7){
        cookies-=upgradeNinePriceNumber;
         cookiesSpent += upgradeNinePriceNumber;
         unlockPunch()
        let tempNumberOne = upgradeNinePriceNumber * .18;
        upgradeNinePriceNumber+=tempNumberOne;
        upgradeNinePriceNumber = Math.ceil(upgradeNinePriceNumber);
        autoCPS+=10;
        upgradeNinePurchased+=1
        upgradesPurchased += 1;
        document.getElementById('upgradeNinePrice').textContent = `Price: ${upgradeNinePriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeNinePurchasedP').textContent = `Purchased: ${upgradeNinePurchased}`
        showNotification('You have successfully purchased Mega Oven!')
        upgradeBoughtSFXPlay()
        changeCookieCount()
        autoclick()
    }else if (upgradesUnlocked<7){
        error('Purchase either Another One or Oven Boost to unlock this upgrade!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "ten"){
    if (cookies >= upgradeTenPriceNumber && upgradesUnlocked>=9){
        cookies-=upgradeTenPriceNumber;
         cookiesSpent += upgradeTenPriceNumber;
         let tempNumberOne = upgradeTenPriceNumber * .225;
        upgradeTenPriceNumber+=tempNumberOne;
        upgradeTenPriceNumber = Math.ceil(upgradeTenPriceNumber);
        cookieMultiplier+=25;
        upgradeTenPurchased+=1;
        upgradesPurchased +=1;
        unlockCookieCrusher()
        document.getElementById('upgradeTenPrice').textContent = `Price: ${upgradeTenPriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeTenPurchasedP').textContent = `Purchased: ${upgradeTenPurchased}`
        showNotification('You have successfully purchased Cookie Punch!')
        upgradeBoughtSFXPlay()
}else if (upgradesUnlocked<9){
    error('Purchase either Super Crunch or Mega Oven to unlock this upgrade!')
}else{
    error('Not enough cookies to purchase this upgrade!')
}
}else if (upgrade == "eleven"){
    if (cookies >= upgradeElevenPriceNumber && upgradesUnlocked>=9){
        cookies-=upgradeElevenPriceNumber;
         cookiesSpent += upgradeElevenPriceNumber;
         let tempNumberOne = upgradeElevenPriceNumber * .24;
         upgradeElevenPriceNumber+=tempNumberOne;
            upgradeElevenPriceNumber = Math.ceil(upgradeElevenPriceNumber);
            autoCPS+=50;
            upgradeElevenPurchased+=1;
            upgradesPurchased +=1;
            unlockCookieCrusher()
            document.getElementById('upgradeElevenPrice').textContent = `Price: ${upgradeElevenPriceNumber.toLocaleString()} Cookies`;
            document.getElementById('upgradeElevenPurchasedP').textContent = `Purchased: ${upgradeElevenPurchased}`
            showNotification('You have successfully purchased Cookie Farm!')
            upgradeBoughtSFXPlay()
    }else if (upgradesUnlocked<9){
        error('Purchase either Super Crunch or Mega Oven to unlock this upgrade!')
}else{
    error('Not enough cookies to purchase this upgrade!')
}
}else if (upgrade == "twelve"){
    if (cookies >= upgradeTwelvePriceNumber && upgradesUnlocked>=9 && upgradeTwelvePurchased==0){
        cookies-=upgradeTwelvePriceNumber;
        cookiesSpent += upgradeTwelvePriceNumber;
        upgradeTwelvePurchased+=1;
        upgradesPurchased +=1;
        document.getElementById('buyButtonUpgradeTwelve').style.color = "lightgrey";
        document.getElementById('upgradeTwelvePurchasedP').textContent = `Purchased: 1`;
        applyAssemblyLineUpgrade();
        unlockCookieCrusher()
        showNotification('You have successfully purchased Assembly Line!');
        upgradeBoughtSFXPlay();
        changeCookieCount();
    }else if (upgradesUnlocked<9){
        error('Purchase either Super Crunch or Mega Oven to unlock this upgrade!')
    }else if (upgradeTwelvePurchased>=1){
        error('You can only buy this upgrade once!')
    }else {
        error('Not enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "thirteen"){
    if (cookies >= upgradeThirteenPriceNumber && upgradesUnlocked>=11 && KingMidasTouch==false){
        cookies-=upgradeThirteenPriceNumber;
        cookiesSpent += upgradeThirteenPriceNumber;
        KingMidasTouch = true;
        upgradeThirteenPurchased+=1;
        upgradesPurchased +=1;
        unlockCookieCrusher()
        kingMidasBoostUnlock()
        document.getElementById('upgradeThirteenPurchasedP').textContent = `Purchased: 1`
        document.getElementById('buyButtonUpgradeThirteen').style.color = "lightgrey"
        showNotification("You have successfully purchased King Midas' Touch!")
        upgradeBoughtSFXPlay()
    }else if (upgradesUnlocked<11){
        error('Purchase Assembly Line to unlock this upgrade!')
    }else if (KingMidasTouch==true){
        error('You can only buy this upgrade once!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
    }
}else if (upgrade == "fourteen"){
    if (cookies >= upgradeFourteenPriceNumber && upgradesUnlocked>=12){
        cookies-=upgradeFourteenPriceNumber;
        cookiesSpent += upgradeFourteenPriceNumber;
        let tempNumberOne = upgradeFourteenPriceNumber * .18;
        upgradeFourteenPriceNumber+=tempNumberOne;
        upgradeFourteenPriceNumber = Math.ceil(upgradeFourteenPriceNumber);
        cookieMultiplier+=200;
        autoCPS+=100;
        autoclick();
        upgradeFourteenPurchased+=1;
        upgradesPurchased +=1;
        document.getElementById('upgradeFourteenPrice').textContent = `Price: ${upgradeFourteenPriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeFourteenPurchasedP').textContent = `Purchased: ${upgradeFourteenPurchased}`
        showNotification('You have successfully purchased Cookie Crusher!')
        upgradeBoughtSFXPlay()
}else if (upgradesUnlocked<12){
        error('Purchase Cookie Punch, Cookie Farm, Assembly Line, or King Midas\' Touch to unlock this upgrade!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
}
}else if (upgrade == "fifteen"){
    if (cookies >= upgradeFifteenPriceNumber && upgradesUnlocked>=12 && upgradeFifteenPurchased==0){
        cookies-=upgradeFifteenPriceNumber;
        cookiesSpent += upgradeFifteenPriceNumber;

        //One to Every Upgrade Purchased So Far
        //+1 Click
        cookieMultiplier+=1;

        //Autoclick
        autoCPS+=1;
        
        //Grandma's Help
        cookieMultiplier+=2;

        //Oven Boost
        autoCPS+=5;

        //Super Crunch 
        cookieMultiplier+=10;

        //Mega Oven
        autoCPS+=10;

        //Cookie Punch
        cookieMultiplier+=25;

        //Cookie Farm
        autoCPS+=50;

        //Cookie Crusher
        cookieMultiplier+=200;
        autoCPS+=100;

        autoclick();
        upgradeFifteenPurchased+=1;
        upgradesPurchased +=1;
        document.getElementById('upgradeFifteenPrice').textContent = `Price: ${upgradeFifteenPriceNumber.toLocaleString()} Cookies`;
        document.getElementById('upgradeFifteenPurchasedP').textContent = `Purchased: 1`
        document.getElementById('buyButtonUpgradeFifteen').style.color = "lightgrey"
        showNotification('You have successfully purchased Three-Peat!')
        upgradeBoughtSFXPlay()
        statsTextChanger();
        changeCookieCount();
}else if (upgradesUnlocked<12){
        error('Purchase Cookie Punch, Cookie Farm, Assembly Line, or King Midas\' Touch to unlock this upgrade!')
    }else if (upgradeFifteenPurchased>=1){
        error('You can only buy this upgrade once!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
}
}else if (upgrade == "sixteen"){
    if (cookies >= upgradeSixteenPriceNumber && upgradeSixteenPurchased==0 && KingMidasTouch==true){
        cookies-=upgradeSixteenPriceNumber;
        cookiesSpent += upgradeSixteenPriceNumber;
        kingMidasBonus=100000;
        kingMidasChance=0.0022;
        upgradeSixteenPurchased+=1;
        upgradesPurchased +=1;
        document.getElementById('upgradeSixteenPurchasedP').textContent = `Purchased: ${upgradeSixteenPurchased}`
        document.getElementById('buyButtonUpgradeSixteen').style.color = "lightgrey"
        showNotification("You have successfully purchased King Midas' Bonus!")
        upgradeBoughtSFXPlay()
        statsTextChanger();
        changeCookieCount();
}else if (KingMidasTouch==false){
        error('Purchase King Midas\' Touch to unlock this upgrade!')
    }else if (upgradeSixteenPurchased>=1){
        error('You can only buy this upgrade once!')
    }else{
        error('Not enough cookies to purchase this upgrade!')
    }
}

        statsTextChanger();
        changeCookieCount();
}

function unlockAnotherOne(){
        if (upgradesUnlocked == 4){
            upgradesUnlocked+=1;
            upgradesUnlocked+=1;//Unlocks 2 upgrades
            document.getElementById('buyButtonUpgradeFive').style.color = "black"
            document.getElementById('buyButtonUpgradeSix').style.color = "black"
            notification('You have unlocked the upgrades Another One and Oven Boost!')
            /*document.getElementById('upgradeSevenContainer').style.display = "block"; Hidden due to it not working*/
            document.getElementById('upgradeEightContainer').style.display = "block";
            document.getElementById('upgradeNineContainer').style.display = "block";

    
        //Another One Changer
        document.getElementById('upgradeFiveTitle').textContent = "Another One!ğŸ”ğŸª"
        document.getElementById('descriptionFive').textContent = "Get 1 more of every upgrade so far (Excluding Double Tap)! It can only be purchased once."
        document.getElementById('upgradeFivePrice').textContent = "Price: 500 Cookies"
        document.getElementById('buyButtonUpgradeFive').textContent = "BUY"
        document.getElementById('buyButtonUpgradeFive').style.color = "black"

        //Oven Boost Changer
        document.getElementById('upgradeSixTitle').textContent = "Oven Boostâš¡ğŸ“ˆ"
        document.getElementById('descriptionSix').textContent = "Passively gain 5 cookies a second. Stacks!"
        document.getElementById('upgradeSixPrice').textContent = "Price: 500 Cookies"
        document.getElementById('buyButtonUpgradeSix').textContent = "BUY"
        document.getElementById('buyButtonUpgradeSix').style.color = "black"
        }   
}

function unlockGrandmaAuto(){
    if (upgradesUnlocked ==2){
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        notification('You have unlocked the upgrade Autoclick!')
        notification('You have unlocked the upgrade Grandmas Help!')

        //Show Another One and Oven Boost
        document.getElementById('upgradeFiveContainer').style.display = "block";
        document.getElementById('upgradeSixContainer').style.display = "block";

        //Autoclick Changer
        document.getElementById('upgradeThreeTitle').textContent = "Autoclickâ±ï¸"
        document.getElementById('descriptionThree').textContent = "Passively gain 1 Cookie a Second! Stacks!"
        document.getElementById('upgradeThreePrice').textContent = "Price: 200 Cookies"
        document.getElementById('buyButtonUpgradeThree').textContent = "BUY"
        document.getElementById('buyButtonUpgradeThree').style.color = "black"

        //Grandmas Help Changer
        document.getElementById('upgradeFourTitle').textContent = "Grandma's Help ğŸ‘µğŸª"
        document.getElementById('descriptionFour').textContent = "Grandma can help you make cookies better and faster! Gives 2 more cookies per click. Stacks!"
        document.getElementById('upgradeFourPrice').textContent = "Price: 100 Cookies"
        document.getElementById('buyButtonUpgradeFour').textContent = "BUY"
        document.getElementById('buyButtonUpgradeFour').style.color = "black"

        statsTextChanger();
    }
}

function unlockGambling(){
    if (upgradesUnlocked == 6){
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        //Shows Cookie Punch, Cookie Farm, Assembly Line, and King Midas' Touch
        document.getElementById('upgradeTenContainer').style.display = "block";
        document.getElementById('upgradeElevenContainer').style.display = "block";
        document.getElementById('upgradeTwelveContainer').style.display = "block";
        document.getElementById('upgradeThirteenContainer').style.display = "block";
        /*notification('You have unlocked the upgrade Legal Gambling!') Hidden due to it not working*/
        notification('You have unlocked the upgrade Super Crunch!')
        notification('You have unlocked the upgrade Mega Oven!')

        //Legal Gambling Changer
        document.getElementById('upgradeSevenTitle').textContent = "Legal GamblingğŸ°ğŸ’°"
        document.getElementById('descriptionSeven').textContent = "Pay 1000 cookies for a chance to strike it rich!"
        document.getElementById('upgradeSevenPrice').textContent = "Price: 1000 Cookies"
        document.getElementById('buyButtonUpgradeSeven').textContent = "BUY"
        document.getElementById('buyButtonUpgradeSeven').style.color = "black"

        //Super Crunch Changer
        document.getElementById('upgradeEightTitle').textContent = "Super Crunch ğŸ’ªğŸª" 
        document.getElementById('descriptionEight').textContent = "Gain +10 cookies per click! Stacks!"
        document.getElementById('upgradeEightPrice').textContent = "Price: 1000 Cookies"
        document.getElementById('buyButtonUpgradeEight').textContent = "BUY"
        document.getElementById('buyButtonUpgradeEight').style.color = "black"

        //Mega Oven Changer
        document.getElementById('upgradeNineTitle').textContent = "Mega Oven ğŸ”¥ğŸª" 
        document.getElementById('descriptionNine').textContent = "Passively gain +10 cookies per second! Stacks!"
        document.getElementById('upgradeNinePrice').textContent = "Price: 2000 Cookies"
        document.getElementById('buyButtonUpgradeNine').textContent = "BUY"
        document.getElementById('buyButtonUpgradeNine').style.color = "black"

        //Fixes a glitch that has Autoclick show up as 1000 cookies when it doesn't
        document.getElementById('upgradeThreePrice').textContent = `Price: ${upgradeThreePriceNumber} Cookies`

        statsTextChanger();
    }
}

function unlockPunch(){
    if (upgradesUnlocked ==9){
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        //Shows Cookie Crusher and Three-Peat
        document.getElementById('upgradeFourteenContainer').style.display = "block";
        document.getElementById('upgradeFifteenContainer').style.display = "block";
        document.getElementById('upgradeSixteenContainer').style.display = "block";
        notification('You have unlocked the upgrade Cookie Punch!')
        notification('You have unlocked the upgrade Cookie Farm!')
        notification('You have unlocked the upgrade Assembly Line!')
        notification('You have unlocked the upgrade King Midas\' Touch!')

        //Cookie Punch Changer
        document.getElementById('upgradeTenTitle').textContent = "Cookie PunchğŸ‘ŠğŸª"
        document.getElementById('descriptionTen').textContent = "Gain +25 cookies per click! Stacks!"
        document.getElementById('upgradeTenPrice').textContent = "Price: 10000 Cookies"
        document.getElementById('buyButtonUpgradeTen').textContent = "BUY"
        document.getElementById('buyButtonUpgradeTen').style.color = "black"

        //Cookie Farm Changer
        document.getElementById('upgradeElevenTitle').textContent = "Cookie FarmğŸŒ¾ğŸª"
        document.getElementById('descriptionEleven').textContent = "Gain +50 cookies per second! Stacks!"
        document.getElementById('upgradeElevenPrice').textContent = "Price: 25000 Cookies"
        document.getElementById('buyButtonUpgradeEleven').textContent = "BUY"
        document.getElementById('buyButtonUpgradeEleven').style.color = "black"

        //Assembly Line Changer
        document.getElementById('upgradeTwelveTitle').textContent = "Assembly LineğŸ­ğŸª"
        document.getElementById('descriptionTwelve').textContent = "Halves the autoclick interval, making you gain cookies passively faster! Can only be purchased once."
        document.getElementById('upgradeTwelvePrice').textContent = "Price: 50000 Cookies"
        document.getElementById('buyButtonUpgradeTwelve').textContent = "BUY"
        document.getElementById('buyButtonUpgradeTwelve').style.color = "black"

        //King Midas' Touch Changer
        document.getElementById('upgradeThirteenTitle').textContent = "King Midas' TouchğŸ‘‘âœ¨"
        document.getElementById('descriptionThirteen').textContent = "Develop King Midas' Golden Touch! One in every thousand click will give you 50,000 cookies plus what you would normally get! Can only be purchased once."
        document.getElementById('upgradeThirteenPrice').textContent = "Price: 50000 Cookies"
        document.getElementById('buyButtonUpgradeThirteen').textContent = "BUY"
        document.getElementById('buyButtonUpgradeThirteen').style.color = "black"

        statsTextChanger();
    }
}

function unlockCookieCrusher(){
    if (upgradesUnlocked == 12){
        upgradesUnlocked+=1;
        upgradesUnlocked+=1;
        notification('You have unlocked the upgrade Cookie Crusher!')
        notification('You have unlocked the upgrade Three-Peat!')

        //Cookie Crusher Changer
        document.getElementById('upgradeFourteenContainer').style.display = "block";
        document.getElementById('upgradeFourteenTitle').textContent = "Cookie CrusherğŸ’¥ğŸª"
        document.getElementById('descriptionFourteen').textContent = "Crush cookies with pure power! Gain +200 cookies per click and +100 cookies per second! Stacks!"
        document.getElementById('upgradeFourteenPrice').textContent = "Price: 100000 Cookies"
        document.getElementById('buyButtonUpgradeFourteen').textContent = "BUY"
        document.getElementById('buyButtonUpgradeFourteen').style.color = "black"

        //Three-Peat Changer
        document.getElementById('upgradeFifteenContainer').style.display = "block";
        document.getElementById('upgradeFifteenTitle').textContent = "Three-PeatğŸ¯ğŸª"
        document.getElementById('descriptionFifteen').textContent = "Get 3 more of every upgrade so far (Excluding Double Tap, Another One, Assembly Line, and King Midas' Touch)! It can only be purchased once."
        document.getElementById('upgradeFifteenPrice').textContent = "Price: 100000 Cookies"
        document.getElementById('buyButtonUpgradeFifteen').textContent = "BUY"
        document.getElementById('buyButtonUpgradeFifteen').style.color = "black"

        statsTextChanger();
    }
}

function playMusicLooping() {
    if (musicEnabled) {
        if (currentTrack === 1) {
            music1.volume = 0.5;
            music1.load();
            music1.play();
        } else {
            music2.volume = 0.5;
            music2.load();
            music2.play();
        }
    }
}

// When song1 ends, play song2
music1.addEventListener('ended', () => {
    currentTrack = 2;
    playMusicLooping();
});

// When song2 ends, play song1
music2.addEventListener('ended', () => {
    currentTrack = 1;
    playMusicLooping();
});

function kingMidasBoostUnlock(){
    if (KingMidasTouch == true){
        upgradesUnlocked+=1;
        notification("You have unlocked King Midas' Boost!")
        document.getElementById('upgradeSixteenTitle').textContent = "King Midas' BoostğŸ‘‘ğŸ’«"
        document.getElementById('upgradeSixteenContainer').style.display = "block";
        document.getElementById('descriptionSixteen').textContent = "Boost up King Midas' Golden Touch! Instead of 50,000 cookies and one in every thousand clicks, you now get 100,000 cookies and one in every five hundred clicks! Can only be purchased once."
        document.getElementById('upgradeSixteenPrice').textContent = "Price: 200000 Cookies"
        document.getElementById('buyButtonUpgradeSixteen').textContent = "BUY"
        document.getElementById('buyButtonUpgradeSixteen').style.color = "black"
        statsTextChanger();
    }
}



function doAutoclick() {
  if (autoCPS > 0) {
    cookies += autoCPS;
    cookiesGainedAllTime += autoCPS;
    cookiesGainedPassively += autoCPS;
    statsTextChanger();
    changeCookieCount();
  }
}

function autoclick() {
  if (autoclickTimer === null) {
    autoclickTimer = setInterval(doAutoclick, autoclickInterval);
  }
}

function applyAssemblyLineUpgrade() {
  autoclickInterval = Math.round(autoclickInterval / 2);
  if (autoclickTimer !== null) {
    clearInterval(autoclickTimer);
    autoclickTimer = setInterval(doAutoclick, autoclickInterval);
  }
}

function toggleStats(openOrClose){
    if (openOrClose == "open"){
        document.getElementById('statsArea').style.display = "block";
    }else if (openOrClose == "close"){
        document.getElementById('statsArea').style.display = "none";
    }
}

function toggleAchievements(openOrClose){
    if (openOrClose == "open"){
        document.getElementById('achievementArea').style.display = "block";
    }else if (openOrClose == "close"){
        document.getElementById('achievementArea').style.display = "none";
    }
}

function statsTextChanger(){
    document.getElementById('cookiesClickedStat').textContent = clicksAllTime.toLocaleString();
    document.getElementById('cookiesGainedStat').textContent = cookiesGainedAllTime.toLocaleString();
    document.getElementById('cookiesGainedOnClickStat').textContent = cookieMultiplier.toLocaleString();
    if ( upgradeTwelvePurchased == 0){
        document.getElementById('cookiesPassivelyGainedPSStat').textContent = autoCPS.toLocaleString();
    }else{
        let totalCPS = autoCPS * 2;
        document.getElementById('cookiesPassivelyGainedPSStat').textContent = totalCPS.toLocaleString();
    }
    document.getElementById('upgradesPurchasedStat').textContent = upgradesPurchased.toLocaleString();
    document.getElementById('upgradesUnlockedStat').textContent = upgradesUnlocked.toLocaleString();
    document.getElementById('cookiesSpentStat').textContent = cookiesSpent.toLocaleString();
    document.getElementById('cookiesGainedClickingStat').textContent = cookiesGainedClicking.toLocaleString();
    document.getElementById('cookiesGainedPassivelyStat').textContent = cookiesGainedPassively.toLocaleString();
    document.getElementById('cookiesGainedFromDoubleTapsStat').textContent = cookiesGainedFromDoubleTaps.toLocaleString();
    document.getElementById('doubleTapsLandedStat').textContent = doubleTapsLanded.toLocaleString();
    document.getElementById('cookiesGainedFromKingMidasStat').textContent = cookiesGainedFromKingMidas.toLocaleString();
    document.getElementById('kingMidasLandedStat').textContent = kingMidasLanded.toLocaleString();
    updateTimePlayedStat();
}

function updateTimePlayedStat() {
    let sec = playSeconds % 60;
    let min = Math.floor(playSeconds / 60) % 60;
    let hr = Math.floor(playSeconds / 3600);
    let timeStr =
        (hr < 10 ? '0' : '') + hr + ':' +
        (min < 10 ? '0' : '') + min + ':' +
        (sec < 10 ? '0' : '') + sec;
    let el = document.getElementById('timePlayedStat');
    if (el) el.textContent = timeStr;
}

function toggleMusic(){
    if (musicEnabled == true){
        musicEnabled = false;
        stopAllSounds();
    }else{
        musicEnabled = true;
        playMenuMusic();
    }
}

function enterDevPassword() {
    const inputBox = document.getElementById('devPasswordBox');
    let inputValue = inputBox.value.trim();
    if (devModeStep === 0) {
        if (inputValue.toLowerCase() === devPassword) {
            isInDevMode = true;
            inputBox.value = '';
            document.getElementById('devText').textContent = 'Enter desired cookie count.';
            devModeStep = 1;
        } else {
            alert('Incorrect password. Try again.');
            inputBox.value = '';
            document.getElementById('devModeToggle').checked = true; // Keep checked if wrong
        }
    } else if (devModeStep === 1) {
        let cookieDevInput = parseInt(inputValue, 10);
        if (!isNaN(cookieDevInput) && cookieDevInput > 0) {
            cookies += cookieDevInput;
            unlockAllUpgrades();
            changeCookieCount();
            alert(`Added ${cookieDevInput} cookies and unlocked all upgrades!`);
            inputBox.value = '';
            devModeStep = 0;
            // Hide popup and return to main menu
            document.getElementById('devModePopup').classList.add('hidden');
            hideAllScreens();
            document.getElementById('menuScreen').style.display = 'block';
            document.getElementById('devText').textContent = 'Enter password to access Dev Mode.';
            document.getElementById('devModeIndicator').style.display = 'block';
        } else {
            alert('Please enter a valid number.');
            inputBox.value = '';
        }
    }
}

function unlockAllUpgrades(){
    upgradesUnlocked = 2;
    unlockGrandmaAuto();
    upgradesUnlocked = 4;
    unlockAnotherOne();
    upgradesUnlocked = 6;
    unlockGambling();
    upgradesUnlocked = 9;
    unlockPunch();
    upgradesUnlocked = 12;
    unlockCookieCrusher();
    upgradesUnlocked = 16;    
    
    statsTextChanger();
}

function toggleSoundEffects(){
    if (soundEffectsEnabled == true){
        soundEffectsEnabled = false;
    }else{
        soundEffectsEnabled = true;
    }
}

function returnToMainMenu(){
    hideAllScreens();
    musicStarted = false;
    document.getElementById('menuScreen').style.display = 'block';
    stopAllSounds();
    playMenuMusic();
}

function stopAllSounds() {
  const sounds = document.querySelectorAll('audio');
  sounds.forEach(sound => {
    sound.pause();
    sound.currentTime = 0;
    sound.load(); // Ensures audio can be played again in all browsers
  });
}

function closeSettings() {
    hideAllScreens();
    document.getElementById('menuScreen').style.display = 'block';
    // Always reset musicStarted so music can play again on Begin
    musicStarted = false;
}

function toggleDevModePopup(openOrClose){
    if (openOrClose == "open"){
        document.getElementById('devModePopup').classList.remove('hidden');
        // Keep the toggle visually ON while popup is open
        setTimeout(function() {
            document.getElementById('devModeToggle').checked = true;
        }, 0);
    }else if (openOrClose == "close"){
        document.getElementById('devModePopup').classList.add('hidden');
        document.getElementById('devModeToggle').checked = false;
    }
}

function reload(){
    location.reload();
}

function playMenuMusic(){
    if (musicEnabled && menuMusic.paused){
     menuMusic.volume = 1;
     menuMusic.play();
  }
}


  (function () {
    const BASE_WIDTH = 1280; // must match #desktopCanvas width
    const root = document.documentElement;
    const canvas = document.getElementById('desktopCanvas');

    function applyScale() {
      // Scale to fit device width, but never upscale on desktop
      const scale = Math.min(window.innerWidth / BASE_WIDTH, 1);
      root.style.setProperty('--scale', scale);

      // Adjust canvas height so the whole page remains scrollable if tall
      // (divide the viewport height by scale to get the unscaled height)
      if (window.innerWidth <= 900) {
        canvas.style.height = (window.innerHeight / scale) + 'px';
      } else {
        canvas.style.height = '';
      }
    }

    window.addEventListener('resize', applyScale);
    window.addEventListener('orientationchange', applyScale);
    applyScale();
  })();
</script>
<script>
// Remove scaling script: use pure CSS for layout
</script>
</body>
</html>
